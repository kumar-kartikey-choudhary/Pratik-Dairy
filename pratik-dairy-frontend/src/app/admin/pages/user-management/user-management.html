<!-- src/app/admin/pages/user-management/user-management.component.html -->

<div class="user-management-container">
    <h1>ðŸ‘¥ User Accounts Management</h1>

    <!-- Loading State -->
    @if (isLoading()) {
        <div class="panel loading-message">
            <p>Loading user data... Please wait.</p>
        </div>
    }

    <!-- Error State -->
    @if (error()) {
        <div class="panel error-message-box">
            <p>Error: {{ error() }}</p>
            <button (click)="loadAllUsers()" class="btn-retry">
                Retry Load
            </button>
        </div>
    }

    <!-- Data Table -->
    @if (!isLoading() && !error()) {
        <div class="panel user-table-panel">
            <h2>Registered Users ({{ users().length }} Total)</h2>
            
            <div class="table-wrapper">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>USERNAME</th>
                            <th>FIRST-NAME</th>
                            <th>LAST-NAME</th>
                            <th>EMAIL</th>
                            <th>ROLE</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (user of users(); track user.id) {
                            <tr>
                                <td class="user-id">#{{ user.id }}</td>
                                <td class="user-name">{{ user.username }}</td>
                                <td class="user-name">{{ user.firstName }}</td>
                                <td class="user-name">{{ user.LastName }}</td>
                                <td>{{ user.email }}</td>
                                <td><span class="role-badge">{{ user.role }}</span></td>
                                <!-- <td><span class="status-badge status-{{ user.status.toLowerCase() }}">{{ user.status }}</span></td> -->
                                <td>
                                    <button class="btn-view">View History</button>
                                    <!-- @if (user.status === 'Active') {
                                        <button class="btn-action btn-danger" (click)="blockUser(user.id)">Block</button>
                                    } -->
                                </td>
                            </tr>
                        }
                        
                        <!-- No Data Message -->
                        @if (users().length === 0) {
                            <tr>
                                <td colspan="6" class="no-data">No users found in the system.</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
</div>